{% extends 'base.html' %}
{% load static %}


{% block title %}
Vision Result
{% endblock %}


{% block content %}

<div class="container mt-4">
    <div class="form-container">
        {% if refresh_button %}
            <div class="text-center">
                <h4 class="mb-4" style="color: #E2E2E2;">{{ api_response }}</h4>
                <a class="btn btn-light btn-lg rounded-3" href="{% url 'website:get_results' job_id %}">Check Process</a>
            </div>
        {% else %}
            <h4 class="text-center mb-4" style="color: #E2E2E2;">Your Narration</h4>
            <div id="text-container"></div>
            <div class="text-center mt-4">
                <a class="btn btn-light btn-lg rounded-3" href="{% url 'users:profile:user_profile' user.id %}">Your Projects</a>
            </div>
        {% endif %}
    </div>
</div>

{% endblock %}

{% block script %}
<script>
    document.addEventListener('DOMContentLoaded', function() {
    const text = "{{ api_response|safe }}";
    let i = 0;
    const container = document.getElementById('text-container');

    function displayLetter() {
        if (i < text.length) {
            container.innerHTML += text.charAt(i); // Add the next letter
            i++;
            setTimeout(displayLetter, 20 + Math.random() * 40); // Randomize time
        }
    }

    displayLetter(); // Start the animation
});
</script>
{% endblock %}
